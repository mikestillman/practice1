# @configure_input@
include ../../../include/config.Makefile
VPATH = @srcdir@
DEPENDS = yes
include ../make.include
include @srcdir@/../Makefile.common

ifeq ($(CXX),g++)
# We are using the -MM option to create *.dep files, which ignores "system" include files.
# We want ../../include/config.h to be a "system" include file, so changing it
# will not force a recompilation of all of our C++ files.
M2CPPFLAGS  = -isystem ../../../include
M2CPPFLAGS += -isystem ../../../libraries/final@FINALPREFIX@/$(librariesRelDir)/include
M2CPPFLAGS += -isystem @srcdir@/../../../include
else
M2CPPFLAGS  = -I../../../include
M2CPPFLAGS += -I../../../libraries/final@FINALPREFIX@/$(librariesRelDir)/include
M2CPPFLAGS += -I@srcdir@/../../../include
endif
M2CPPFLAGS += -I.

CPPFLAGS := $(M2CPPFLAGS) $(CPPFLAGS)

%.dep: %.cpp
	@ echo "$(CXX) -MM $(CPPFLAGS) $< >$*-tmp.dep && <$*-tmp.dep sed 's/\($*\)\.o[ :]*/\1.o $@ : /' >$@ && rm $*-tmp.dep" >> LOGFILE
	@ echo " ** creating $@ from $<"
	@ $(CXX) -MM $(CPPFLAGS) $< >$*-tmp.dep && <$*-tmp.dep sed 's/\($*\)\.o[ :]*/\1.o $@ : /' >$@ && rm $*-tmp.dep

%.dep: %.c
	@ echo "$(CC)  -MM $(CPPFLAGS) $< >$*-tmp.dep && <$*-tmp.dep sed 's/\($*\)\.o[ :]*/\1.o $@ : /' >$@ && rm $*-tmp.dep" >> LOGFILE
	@ echo " ** creating $@ from $<"
	@ $(CC)  -MM $(CPPFLAGS) $< >$*-tmp.dep && <$*-tmp.dep sed 's/\($*\)\.o[ :]*/\1.o $@ : /' >$@ && rm $*-tmp.dep

.PHONY : all place_into_lib

include @srcdir@/Makefile.files

all :: $(F4_OBJECT_FILES)
check_it : $(F4_OBJECT_FILES) check_it.o
	gcc -o check_it check_it.o $(F4_OBJECT_FILES) -L/sw/lib -lgc

%.s : %.c; $(COMPILE.cc) -S $< $(OUTPUT_OPTION)

Makefile : Makefile.in; cd ../../..; ./config.status Macaulay2/e/f4/Makefile
clean ::; rm -f *.o *.rpo
distclean: clean; rm -f Makefile

clean::; rm -f *.dep dep-*.tmp LOGFILE
ifeq "$(DEPENDS)" "yes"
include $(F4_CFILES:=.dep) $(F4_CCFILES:=.dep)
endif

# Local Variables:
# compile-command: "make -C $M2BUILDDIR/Macaulay2/e "
# End:

