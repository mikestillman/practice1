# license for libfac: freely, with copyright notice, state if modifications are made
#   see file 00README for details

# VERSION = 3.0.4

# VERSION = 3.1.0
# PATCHFILE = @abs_srcdir@/patch-3.1.0

# VERSION = 3.1.1
# PATCHFILE = @abs_srcdir@/patch-3.1.1
# PRECONFIGURE = autoconf

# VERSION = 3.1.2
# VERSIONH := $(shell echo $(VERSION) | sed 's/\./-/g')
# PRECONFIGURE = autoconf
# TARDIR = libfac-$(VERSIONH)
# LICENSEFILES = 00README COPYING
# PATCHFILE = @abs_srcdir@/patch-3.1.2

VERSION = 3.1.3
VERSIONH := $(shell echo $(VERSION) | sed 's/\./-/g')
PRECONFIGURE = autoconf
TARDIR = libfac-$(VERSIONH)
LICENSEFILES = 00README COPYING
PATCHFILE = @abs_srcdir@/patch-3.1.3
BUILDTARGET = libfac.a
INSTALLTARGET = .
LIBRARIES = libfac.a
INCLUDEFILES = factor.h

TARFILE := libfac-$(shell echo $(VERSION) | sed 's/\./-/g').tar.gz
URL = ftp://www.mathematik.uni-kl.de/pub/Math/Singular/Libfac
CONFIGOPTIONS += --enable-NTL
ifeq (@DEBUG@,yes)
CONFIGOPTIONS += --with-debug
endif
ifeq (@OPTIMIZE@,yes)
CXXFLAGS += -Wno-deprecated --no-rtti --no-exceptions
endif

## CONFIGOPTIONS += --build=@build@

# libfac tests fail under MacOS 10.4 32 bit intel and MacOS 64 bit intel:
# CHECKTARGET = tests
CHECKTARGET = .

CHECKOPTIONS = LIBS="-lfac -lcf -lcfmem -lntl -lgmp"
include ../Makefile.library
Makefile: @srcdir@/Makefile.in ; cd ../.. && ./config.status libraries/libfac/Makefile
clean uninstall ::
	if [ -d $(LIBRARIESDIR) ] ;\
	then cd $(LIBRARIESDIR) && rm -rf include/factor.h lib/libfac.a lib/libsingfac.a lib/libsingfac_g.a ;\
	fi

# ifeq (@DEBUG@,yes)
# post-install: $(LIBRARIESDIR)/lib/libfac.a
# $(LIBRARIESDIR)/lib/libfac.a:
# 	ln -s libfac-g.a $@
# endif

# Local Variables:
# compile-command: "make -C $M2BUILDDIR/libraries/libfac "
# End:
